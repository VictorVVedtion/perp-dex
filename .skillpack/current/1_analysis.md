# Phase 1: æ·±åº¦åˆ†ææŠ¥å‘Š (æ›´æ–°)

## ä»»åŠ¡: è®¢å•æäº¤æµç¨‹å®Œå–„

> ä¸Šä¸€è½®å·²å®Œæˆ REST APIã€Kçº¿ç«¯ç‚¹ã€WebSocket é›†æˆ
> æœ¬è½®èšç„¦: **è®©ç”¨æˆ·èƒ½å¤ŸçœŸæ­£ä¸‹å•äº¤æ˜“**

---

## å‰ç½®å®ŒæˆçŠ¶æ€

| ç»„ä»¶ | çŠ¶æ€ |
|------|------|
| REST API Server | âœ… `api/server.go` |
| Mock Data Mode | âœ… `api/mock_data.go` |
| WebSocket Hub | âœ… `api/websocket/hub.go` |
| Frontend Config | âœ… `frontend/.env.local` |

---

## æœ¬è½®ä»»åŠ¡: è¡¥é½ä¸ Hyperliquid å·®è· (ç«¯åˆ°ç«¯å¯ç”¨)

---

## 1. ç°çŠ¶è¯„ä¼°

### âœ… å·²å®Œæˆ (å¯ç”¨)

| æ¨¡å— | æ–‡ä»¶ | çŠ¶æ€ |
|------|------|------|
| è¿½è¸ªæ­¢æŸè®¢å• | `x/orderbook/types/order_extended.go` | âœ… |
| OCO è®¢å• | `x/orderbook/keeper/oco.go` | âœ… |
| Kçº¿æ•°æ®å­˜å‚¨ | `x/perpetual/keeper/kline.go` | âœ… |
| WebSocket åç«¯ | `api/websocket/server.go` | âœ… |
| WebSocket å‰ç«¯ | `frontend/src/lib/websocket/client.ts` | âœ… |
| Keplr é’±åŒ…é›†æˆ | `frontend/src/lib/wallet/keplr.ts` | âœ… |
| useWallet Hook | `frontend/src/hooks/useWallet.ts` | âœ… |
| TradeForm UI | `frontend/src/components/TradeForm.tsx` | âœ… |
| SDK Client | `sdk/src/client.ts` | âœ… |

### âš ï¸ ç¼ºå¤±çš„å…³é”®ç»„ä»¶

| ç»„ä»¶ | é—®é¢˜ | å½±å“ |
|------|------|------|
| **REST API è·¯ç”±** | `api/handlers/` ç›®å½•ä¸å­˜åœ¨ | æ— æ³•æŸ¥è¯¢ Kçº¿ã€è´¦æˆ·æ•°æ® |
| **API ä¸»å…¥å£** | `cmd/api/main.go` ä¸å­˜åœ¨ | åç«¯ API æ— æ³•å¯åŠ¨ |
| **æ¶ˆæ¯ç±»å‹æ³¨å†Œ** | Proto ç±»å‹å¯èƒ½æœªæ³¨å†Œ | é“¾ä¸Šäº¤æ˜“å¯èƒ½å¤±è´¥ |

---

## 2. ä¾èµ–å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·ç•Œé¢ (Frontend)                   â”‚
â”‚  TradeForm.tsx â”€â”€â”€ useWallet â”€â”€â”€ signAndBroadcast       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é’±åŒ…å±‚ (Keplr)                        â”‚
â”‚  KeplrWallet â”€â”€â”€ SigningStargateClient â”€â”€â”€ RPC          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    é“¾èŠ‚ç‚¹ (Cosmos SDK)                   â”‚
â”‚  MsgPlaceOrder â”€â”€â”€ Keeper â”€â”€â”€ OrderBook â”€â”€â”€ Match       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®æ¨é€ (WebSocket)                  â”‚
â”‚  Hub â”€â”€â”€ Client â”€â”€â”€ Subscribe â”€â”€â”€ Frontend              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. å…³é”®å·®è·è¯†åˆ«

### Gap 1: REST API æœåŠ¡å™¨ ğŸ”´ é«˜ä¼˜å…ˆçº§

**é—®é¢˜**: æ²¡æœ‰ HTTP API æœåŠ¡å™¨æä¾›æ•°æ®æŸ¥è¯¢æ¥å£

**éœ€è¦åˆ›å»º**:
- `api/server.go` - ä¸» API æœåŠ¡å™¨
- `api/handlers/market.go` - å¸‚åœºæ•°æ®
- `api/handlers/account.go` - è´¦æˆ·æ•°æ®
- `api/handlers/kline.go` - Kçº¿æ•°æ®
- `cmd/api/main.go` - å…¥å£

### Gap 2: å‰ç«¯-åç«¯è¿æ¥ ğŸ”´ é«˜ä¼˜å…ˆçº§

**é—®é¢˜**: å‰ç«¯ WebSocket client æœªä¸åç«¯ Hub é›†æˆ

**éœ€è¦**:
- é…ç½® WebSocket æœåŠ¡å™¨åœ°å€
- å‰ç«¯è¿æ¥æ—¶è‡ªåŠ¨è®¢é˜…ç›¸å…³é¢‘é“

### Gap 3: é“¾é…ç½®ä¸æµ‹è¯•ç½‘ ğŸŸ¡ ä¸­ä¼˜å…ˆçº§

**é—®é¢˜**: é“¾èŠ‚ç‚¹å¯èƒ½æœªè¿è¡Œï¼Œæ— æ³•å®é™…æµ‹è¯•

**éœ€è¦**:
- ç¡®è®¤é“¾é…ç½®æ­£ç¡®
- æä¾›æœ¬åœ°æµ‹è¯•ç½‘å¯åŠ¨è„šæœ¬

---

## 4. é£é™©è¯„ä¼°

| é£é™© | ç­‰çº§ | ç¼“è§£æªæ–½ |
|------|------|----------|
| é“¾æ¶ˆæ¯ç±»å‹æœªæ³¨å†Œ | ä¸­ | æ£€æŸ¥ proto ç¼–è¯‘å’Œæ³¨å†Œ |
| RPC åœ°å€ä¸å¯è¾¾ | é«˜ | æä¾›æ¨¡æ‹Ÿæ¨¡å¼ |
| Keplr ä¸æ”¯æŒè‡ªå®šä¹‰é“¾ | ä½ | suggestChain å·²å®ç° |
| WebSocket è¿æ¥å¤±è´¥ | ä¸­ | å·²æœ‰é‡è¿æœºåˆ¶ |

---

## 5. å»ºè®®å®æ–½é¡ºåº

```
1. [å¿…é¡»] åˆ›å»º REST API æœåŠ¡å™¨ (Kline, Market, Account)
2. [å¿…é¡»] åˆ›å»º API ä¸»å…¥å£ cmd/api/main.go
3. [å¿…é¡»] å‰ç«¯é…ç½®æ­£ç¡®çš„ API/WS åœ°å€
4. [å¯é€‰] æ·»åŠ æ¨¡æ‹Ÿæ¨¡å¼ç”¨äºæ¼”ç¤º
5. [å¯é€‰] æœ¬åœ°æµ‹è¯•ç½‘å¯åŠ¨è„šæœ¬
```

---

## 6. ä¸‹ä¸€é˜¶æ®µç›®æ ‡

**Phase 2: è¯¦ç»†è§„åˆ’**
- è®¾è®¡ REST API è·¯ç”±ç»“æ„
- ç¡®å®šå„å¤„ç†å‡½æ•°ç­¾å
- è§„åˆ’å‰åç«¯é›†æˆç‚¹
