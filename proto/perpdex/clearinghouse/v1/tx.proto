syntax = "proto3";
package perpdex.clearinghouse.v1;

option go_package = "github.com/openalpha/perp-dex/x/clearinghouse/types";

import "cosmos/msg/v1/msg.proto";
import "cosmos_proto/cosmos.proto";
import "amino/amino.proto";

// Msg defines the clearinghouse Msg service
service Msg {
  option (cosmos.msg.v1.service) = true;

  // Liquidate triggers liquidation of an unhealthy position
  rpc Liquidate(MsgLiquidate) returns (MsgLiquidateResponse);
}

// MsgLiquidate defines the Liquidate request
message MsgLiquidate {
  option (cosmos.msg.v1.signer) = "liquidator";
  option (amino.name) = "perpdex/clearinghouse/MsgLiquidate";

  string liquidator = 1 [(cosmos_proto.scalar) = "cosmos.AddressString"];
  string trader = 2;     // position owner to liquidate
  string market_id = 3;
}

// MsgLiquidateResponse defines the Liquidate response
message MsgLiquidateResponse {
  string liquidation_id = 1;
  string liquidated_size = 2;
  string liquidation_price = 3;
  string penalty_paid = 4;
}
